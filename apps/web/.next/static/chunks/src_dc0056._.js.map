{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/lib/storage.ts"],"sourcesContent":["export const storage = {\r\n  set(key: string, value: any) { try { localStorage.setItem(key, JSON.stringify(value)); } catch {} },\r\n  get(key: string) { try { const v = localStorage.getItem(key); return v ? JSON.parse(v) : null; } catch { return null } },\r\n  remove(key: string) { try { localStorage.removeItem(key); } catch {} }\r\n};\r\n"],"names":[],"mappings":";;;AAAO,MAAM,UAAU;IACrB,KAAI,GAAW,EAAE,KAAU;QAAI,IAAI;YAAE,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;QAAS,EAAE,OAAM,CAAC;IAAE;IAClG,KAAI,GAAW;QAAI,IAAI;YAAE,MAAM,IAAI,aAAa,OAAO,CAAC;YAAM,OAAO,IAAI,KAAK,KAAK,CAAC,KAAK;QAAM,EAAE,OAAM;YAAE,OAAO;QAAK;IAAE;IACvH,QAAO,GAAW;QAAI,IAAI;YAAE,aAAa,UAAU,CAAC;QAAM,EAAE,OAAM,CAAC;IAAE;AACvE"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/context/ThemeContext.tsx"],"sourcesContent":["// apps/web/src/context/ThemeContext.tsx\r\n\"use client\";\r\n\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { storage } from \"@/lib/storage\";\r\n\r\ninterface ThemeContextType {\r\n  theme: \"light\" | \"dark\";\r\n  toggle: () => void;\r\n  setTheme: (t: \"light\" | \"dark\") => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType>({\r\n  theme: \"light\",\r\n  toggle: () => {},\r\n  setTheme: () => {},\r\n});\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n  const [theme, setThemeState] = useState<\"light\" | \"dark\">(\r\n    (storage.get(\"theme\") as any) || \"light\"\r\n  );\r\n\r\n  useEffect(() => {\r\n    const root = window.document.documentElement;\r\n    root.classList.remove(theme === \"dark\" ? \"light\" : \"dark\");\r\n    root.classList.add(theme);\r\n    storage.set(\"theme\", theme);\r\n  }, [theme]);\r\n\r\n  function setTheme(t: \"light\" | \"dark\") {\r\n    setThemeState(t);\r\n  }\r\n\r\n  function toggle() {\r\n    setThemeState((prev) => (prev === \"light\" ? \"dark\" : \"light\"));\r\n  }\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, toggle, setTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useTheme() {\r\n  return useContext(ThemeContext);\r\n}\r\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;;;;AACxC;;;AAWA,MAAM,6BAAe,gVAAgC;IACnD,OAAO;IACP,QAAQ,KAAO;IACf,UAAU,KAAO;AACnB;AAEO,SAAS,cAAc,EAAE,QAAQ,EAAiC;;IACvE,MAAM,CAAC,OAAO,cAAc,GAAG,2UAC7B,AAAC,mJAAQ,GAAG,CAAC,YAAoB;IAGnC,4UAAU;QACR,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;QAC5C,KAAK,SAAS,CAAC,MAAM,CAAC,UAAU,SAAS,UAAU;QACnD,KAAK,SAAS,CAAC,GAAG,CAAC;QACnB,mJAAQ,GAAG,CAAC,SAAS;IACvB,GAAG;QAAC;KAAM;IAEV,SAAS,SAAS,CAAmB;QACnC,cAAc;IAChB;IAEA,SAAS;QACP,cAAc,CAAC,OAAU,SAAS,UAAU,SAAS;IACvD;IAEA,qBACE,yVAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAQ;QAAS;kBACrD;;;;;;AAGP;GAzBgB;KAAA;AA2BT,SAAS;;IACd,OAAO,6UAAW;AACpB;IAFgB"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/lib/api.ts"],"sourcesContent":["// apps/web/src/lib/api.ts\r\n\"use client\";\r\n\r\nimport { ENDPOINTS } from \"./config\";\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:3001/api\";\r\n\r\n/* ----------------------- CSRF ----------------------- */\r\nfunction getCsrfTokenFromCookie(): string | null {\r\n  if (typeof document === \"undefined\") return null;\r\n  const m = document.cookie.match(/(?:^|; )csrf_token=([^;]+)/);\r\n  return m ? decodeURIComponent(m[1]) : null;\r\n}\r\n\r\n/* ---------------------- Refresh ---------------------- */\r\nasync function refreshToken() {\r\n  const res = await fetch(`${API_BASE}/auth/refresh`, {\r\n    method: \"POST\",\r\n    credentials: \"include\"\r\n  });\r\n  if (!res.ok) throw new Error(\"Refresh failed\");\r\n  return res.json();\r\n}\r\n\r\n/* -------------------- Core request -------------------- */\r\n// automatically handles:\r\n// - full URLs\r\n// - retries once on 401\r\n// - CSRF headers\r\n// - JSON parsing fallback to text\r\nasync function request(path: string, opts: RequestInit = {}, retry = true): Promise<any> {\r\n  const url = path.startsWith(\"http\") ? path : `${API_BASE}${path}`;\r\n\r\n  const headers = new Headers(opts.headers ?? {});\r\n  const csrf = getCsrfTokenFromCookie();\r\n  if (csrf) headers.set(\"x-csrf-token\", csrf);\r\n\r\n  const finalOpts: RequestInit = {\r\n    credentials: \"include\",\r\n    ...opts,\r\n    headers\r\n  };\r\n\r\n  const res = await fetch(url, finalOpts);\r\n\r\n  // Parse JSON safely\r\n  let text = \"\";\r\n  try {\r\n    text = await res.text();\r\n  } catch {}\r\n\r\n  let data: any;\r\n  try {\r\n    data = text ? JSON.parse(text) : null;\r\n  } catch {\r\n    data = text;\r\n  }\r\n\r\n  // retry on 401 once\r\n  if (res.status === 401 && retry) {\r\n    try {\r\n      await refreshToken();\r\n      return request(path, opts, false);\r\n    } catch {\r\n      /* continue to throw original 401 */\r\n    }\r\n  }\r\n\r\n  if (!res.ok) {\r\n    const err: any = new Error(data?.message || res.statusText || \"API error\");\r\n    err.status = res.status;\r\n    err.data = data;\r\n    throw err;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n/* ---------------------- Public API ---------------------- */\r\nexport const Api = {\r\n  request,\r\n\r\n  get(path: string) {\r\n    return request(path, { method: \"GET\" });\r\n  },\r\n\r\n  post(path: string, body?: any) {\r\n    const isForm = body instanceof FormData;\r\n    return request(path, {\r\n      method: \"POST\",\r\n      body: isForm ? body : JSON.stringify(body),\r\n      headers: isForm ? undefined : { \"Content-Type\": \"application/json\" }\r\n    });\r\n  },\r\n\r\n  put(path: string, body?: any) {\r\n    return request(path, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(body),\r\n      headers: { \"Content-Type\": \"application/json\" }\r\n    });\r\n  },\r\n\r\n  delete(path: string) {\r\n    return request(path, { method: \"DELETE\" });\r\n  },\r\n\r\n  /* ------------------- Auth helpers ------------------- */\r\n  async getMe() {\r\n    return this.get(\"/auth/me\");\r\n  },\r\n\r\n  /* ------------------- Booking helpers ------------------- */\r\n  async createBooking(payload: {\r\n    tripId: string;\r\n    seats: number;\r\n    passengerInfo?: any;\r\n    promo?: string;\r\n  }) {\r\n    return this.post(\"/bookings/create\", payload);\r\n  },\r\n\r\n  async getBooking(bookingId: string) {\r\n    return this.get(`/bookings/${encodeURIComponent(bookingId)}`);\r\n  },\r\n\r\n  /* ------------------- Promo helpers ------------------- */\r\n  async applyPromo(payload: { code: string; tripId?: string; bookingId?: string }) {\r\n    return this.post(\"/promos/apply\", payload);\r\n  },\r\n\r\n  /* ------------------- Payment helpers ------------------- */\r\n  async createCheckout(payload: {\r\n    bookingId: string;\r\n    method: \"mpesa\" | \"stripe\";\r\n  }) {\r\n    return this.post(\"/payments/checkout\", payload);\r\n  },\r\n\r\n  /* ------------------- Trips ------------------- */\r\n  async getTrip(id: string) {\r\n    return this.get(`/trips/${id}`);\r\n  },\r\n\r\n  /* ---------------- Push Subscriptions ---------------- */\r\n  async saveSubscription(subscription: any) {\r\n    return this.post(\"/push/subscribe\", { subscription });\r\n  },\r\n\r\n  async getSubscriptions() {\r\n    return this.get(\"/push/subscriptions\");\r\n  },\r\n\r\n  async deleteSubscription(idOrEndpoint: string) {\r\n    return this.delete(`/push/subscriptions/${encodeURIComponent(idOrEndpoint)}`);\r\n  }\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/context/AuthContext.tsx"],"sourcesContent":["// apps/web/src/context/AuthContext.tsx\r\n\"use client\";\r\n\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { storage } from \"@/lib/storage\";\r\nimport { clientGet } from \"@/lib/api\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  loading: boolean;\r\n  login: (token: string) => Promise<void>;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  loading: true,\r\n  login: async () => {},\r\n  logout: () => {},\r\n});\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  // Fetch user from backend using stored token\r\n  async function restoreUser() {\r\n    const token = storage.get(\"access\");\r\n    if (!token) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const u = await clientGet(\"/auth/me\", token);\r\n      setUser(u);\r\n    } catch (err) {\r\n      storage.remove(\"access\");\r\n      setUser(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    restoreUser();\r\n  }, []);\r\n\r\n  // Login: save token + load user profile\r\n  async function login(token: string) {\r\n    storage.set(\"access\", token);\r\n    await restoreUser();\r\n    router.push(\"/\");\r\n  }\r\n\r\n  function logout() {\r\n    storage.remove(\"access\");\r\n    setUser(null);\r\n    router.push(\"/auth/login\");\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        loading,\r\n        login,\r\n        logout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n"],"names":[],"mappings":"AAAA,uCAAuC;;;;;;;;;;;;;AACvC;;;;;AAoBA,MAAM,4BAAc,gVAA+B;IACjD,MAAM;IACN,SAAS;IACT,OAAO,WAAa;IACpB,QAAQ,KAAO;AACjB;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,2UAAsB;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,2UAAS;IACvC,MAAM,SAAS;IAEf,6CAA6C;IAC7C,eAAe;QACb,MAAM,QAAQ,mJAAQ,GAAG,CAAC;QAC1B,IAAI,CAAC,OAAO;YACV,WAAW;YACX;QACF;QAEA,IAAI;YACF,MAAM,IAAI,MAAM,iJAAU,YAAY;YACtC,QAAQ;QACV,EAAE,OAAO,KAAK;YACZ,mJAAQ,MAAM,CAAC;YACf,QAAQ;QACV,SAAU;YACR,WAAW;QACb;IACF;IAEA,4UAAU;QACR;IACF,GAAG,EAAE;IAEL,wCAAwC;IACxC,eAAe,MAAM,KAAa;QAChC,mJAAQ,GAAG,CAAC,UAAU;QACtB,MAAM;QACN,OAAO,IAAI,CAAC;IACd;IAEA,SAAS;QACP,mJAAQ,MAAM,CAAC;QACf,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,yVAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;GArDgB;;;;;KAAA;AAuDT,SAAS;;IACd,OAAO,6UAAW;AACpB;IAFgB"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/hooks/useAuth.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { apiFetch } from \"@/lib/api\";\r\nimport { storage } from \"@/lib/storage\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { User } from \"@/lib/User\";\r\n\r\ninterface UseAuthResult {\r\n  user: User | null;\r\n  loading: boolean;\r\n  token: string | null;\r\n  login: (email: string, password: string) => Promise<boolean>;\r\n  register: (data: { name: string; email: string; password: string }) => Promise<boolean>;\r\n  logout: () => void;\r\n  refreshUser: () => Promise<void>;\r\n}\r\n\r\n/**\r\n * Authentication Hook\r\n * -------------------\r\n * Handles:\r\n *  - login\r\n *  - logout\r\n *  - register\r\n *  - token storage\r\n *  - fetching user profile\r\n *  - sync with API + storage\r\n */\r\nexport function useAuth(): UseAuthResult {\r\n  const router = useRouter();\r\n\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  /**\r\n   * Load token from LocalStorage on first mount\r\n   */\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    const stored = storage.get(\"token\");\r\n    if (stored) {\r\n      setToken(stored);\r\n    }\r\n\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  /**\r\n   * Fetch profile when token changes\r\n   */\r\n  useEffect(() => {\r\n    if (!token) {\r\n      setUser(null);\r\n      return;\r\n    }\r\n    refreshUser();\r\n  }, [token]);\r\n\r\n  /**\r\n   * Fetch authenticated user profile\r\n   */\r\n  const refreshUser = useCallback(async () => {\r\n    if (!token) return;\r\n\r\n    try {\r\n      const res = await apiFetch(\"/auth/me\", {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setUser(data);\r\n      } else {\r\n        // token invalid â†’ logout\r\n        logout();\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch profile:\", err);\r\n      logout();\r\n    }\r\n  }, [token]);\r\n\r\n  /**\r\n   * Login\r\n   */\r\n  const login = async (email: string, password: string): Promise<boolean> => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await apiFetch(\"/auth/login\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ email, password })\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setLoading(false);\r\n        return false;\r\n      }\r\n\r\n      storage.set(\"token\", data.token);\r\n      setToken(data.token);\r\n\r\n      router.push(\"/profile\");\r\n      return true;\r\n    } catch (err) {\r\n      console.error(\"Login error:\", err);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Register\r\n   */\r\n  const register = async (body: {\r\n    name: string;\r\n    email: string;\r\n    password: string;\r\n  }): Promise<boolean> => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await apiFetch(\"/auth/register\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify(body)\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setLoading(false);\r\n        return false;\r\n      }\r\n\r\n      storage.set(\"token\", data.token);\r\n      setToken(data.token);\r\n\r\n      router.push(\"/profile\");\r\n      return true;\r\n    } catch (err) {\r\n      console.error(\"Registration error:\", err);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Logout\r\n   */\r\n  const logout = () => {\r\n    storage.remove(\"token\");\r\n    setToken(null);\r\n    setUser(null);\r\n    router.push(\"/auth/login\");\r\n  };\r\n\r\n  return {\r\n    user,\r\n    loading,\r\n    token,\r\n    login,\r\n    register,\r\n    logout,\r\n    refreshUser\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;;;;;AA6BO,SAAS;;IACd,MAAM,SAAS;IAEf,MAAM,CAAC,MAAM,QAAQ,GAAG,2UAAsB;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,2UAAwB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,2UAAS;IAEvC;;GAEC,GACD,4UAAU;QACR,IAAI,OAAO,WAAW,aAAa;QAEnC,MAAM,SAAS,mJAAQ,GAAG,CAAC;QAC3B,IAAI,QAAQ;YACV,SAAS;QACX;QAEA,WAAW;IACb,GAAG,EAAE;IAEL;;GAEC,GACD,4UAAU;QACR,IAAI,CAAC,OAAO;YACV,QAAQ;YACR;QACF;QACA;IACF,GAAG;QAAC;KAAM;IAEV;;GAEC,GACD,MAAM,cAAc,8UAAY;QAC9B,IAAI,CAAC,OAAO;QAEZ,IAAI;YACF,MAAM,MAAM,MAAM,gJAAS,YAAY;gBACrC,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,MAAM,CAAC;gBAAC;YAC9C;YAEA,IAAI,IAAI,EAAE,EAAE;gBACV,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,QAAQ;YACV,OAAO;gBACL,yBAAyB;gBACzB;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C;QACF;IACF,GAAG;QAAC;KAAM;IAEV;;GAEC,GACD,MAAM,QAAQ,OAAO,OAAe;QAClC,WAAW;QAEX,IAAI;YACF,MAAM,MAAM,MAAM,gJAAS,eAAe;gBACxC,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAO;gBAAS;YACzC;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,WAAW;gBACX,OAAO;YACT;YAEA,mJAAQ,GAAG,CAAC,SAAS,KAAK,KAAK;YAC/B,SAAS,KAAK,KAAK;YAEnB,OAAO,IAAI,CAAC;YACZ,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,OAAO;QACT,SAAU;YACR,WAAW;QACb;IACF;IAEA;;GAEC,GACD,MAAM,WAAW,OAAO;QAKtB,WAAW;QAEX,IAAI;YACF,MAAM,MAAM,MAAM,gJAAS,kBAAkB;gBAC3C,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,WAAW;gBACX,OAAO;YACT;YAEA,mJAAQ,GAAG,CAAC,SAAS,KAAK,KAAK;YAC/B,SAAS,KAAK,KAAK;YAEnB,OAAO,IAAI,CAAC;YACZ,OAAO;QACT,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,uBAAuB;YACrC,OAAO;QACT,SAAU;YACR,WAAW;QACb;IACF;IAEA;;GAEC,GACD,MAAM,SAAS;QACb,mJAAQ,MAAM,CAAC;QACf,SAAS;QACT,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GA/IgB"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\n\r\nexport default function Navbar() {\r\n  const { user, logout } = useAuth();\r\n  const path = usePathname();\r\n\r\n  const linkClass = (href: string) =>\r\n    `text-sm transition ${\r\n      path?.startsWith(href)\r\n        ? \"text-primary font-semibold\"\r\n        : \"text-gray-600 hover:text-primary\"\r\n    }`;\r\n\r\n  return (\r\n    <nav className=\"w-full bg-white border-b shadow-sm\">\r\n      <div className=\"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between\">\r\n\r\n        {/* LOGO */}\r\n        <Link href=\"/\" className=\"text-xl font-bold text-primary\">\r\n          SisiMove\r\n        </Link>\r\n\r\n        {/* NAV LINKS (desktop) */}\r\n        <div className=\"hidden md:flex items-center gap-6\">\r\n          <Link href=\"/search\" className={linkClass(\"/search\")}>\r\n            Search\r\n          </Link>\r\n\r\n          <Link href=\"/results\" className={linkClass(\"/results\")}>\r\n            Results\r\n          </Link>\r\n\r\n          {user && (\r\n            <Link href=\"/bookings\" className={linkClass(\"/bookings\")}>\r\n              My Bookings\r\n            </Link>\r\n          )}\r\n\r\n          <Link href=\"/support\" className={linkClass(\"/support\")}>\r\n            Support\r\n          </Link>\r\n        </div>\r\n\r\n        {/* RIGHT SIDE (auth) */}\r\n        <div className=\"flex items-center gap-3\">\r\n\r\n          {user ? (\r\n            <>\r\n              <span className=\"hidden sm:block text-sm text-gray-600\">\r\n                {user.name ?? user.email}\r\n              </span>\r\n\r\n              <button\r\n                onClick={logout}\r\n                className=\"px-3 py-1 rounded bg-red-500 text-white text-sm\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <Link\r\n              href=\"/auth/login\"\r\n              className=\"px-3 py-1 rounded bg-primary text-white text-sm\"\r\n            >\r\n              Login\r\n            </Link>\r\n          )}\r\n        </div>\r\n\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;AAKe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG;IACzB,MAAM,OAAO;IAEb,MAAM,YAAY,CAAC,OACjB,CAAC,mBAAmB,EAClB,MAAM,WAAW,QACb,+BACA,mCACL,CAAC;IAEJ,qBACE,yVAAC;QAAI,WAAU;kBACb,cAAA,yVAAC;YAAI,WAAU;;8BAGb;oBAAM,MAAK;oBAAI,WAAU;8BAAiC;;;;;;8BAK1D,yVAAC;oBAAI,WAAU;;sCACb;4BAAM,MAAK;4BAAU,WAAW,UAAU;sCAAY;;;;;;sCAItD;4BAAM,MAAK;4BAAW,WAAW,UAAU;sCAAa;;;;;;wBAIvD,sBACC;4BAAM,MAAK;4BAAY,WAAW,UAAU;sCAAc;;;;;;sCAK5D;4BAAM,MAAK;4BAAW,WAAW,UAAU;sCAAa;;;;;;;;;;;;8BAM1D,yVAAC;oBAAI,WAAU;8BAEZ,qBACC;;0CACE,yVAAC;gCAAK,WAAU;0CACb,KAAK,IAAI,IAAI,KAAK,KAAK;;;;;;0CAG1B,yVAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;qDAKH;wBACE,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AASb;GAtEwB;;;;;;KAAA"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 604, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/components/BottomNav.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { Home, Search, User, Book } from \"lucide-react\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function BottomNav() {\r\n  const path = usePathname();\r\n\r\n  const active = (href: string) => {\r\n    if (href === \"/\") return path === \"/\";\r\n    return path.startsWith(href);\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t shadow-sm md:hidden z-40\">\r\n      <div className=\"flex justify-around items-center py-2\">\r\n        <Link\r\n          href=\"/\"\r\n          className={`flex flex-col items-center ${active(\"/\") ? \"text-primary\" : \"text-gray-500\"}`}\r\n        >\r\n          <Home size={22} />\r\n          <span className=\"text-[10px]\">Home</span>\r\n        </Link>\r\n\r\n        <Link\r\n          href=\"/search\"\r\n          className={`flex flex-col items-center ${active(\"/search\") ? \"text-primary\" : \"text-gray-500\"}`}\r\n        >\r\n          <Search size={22} />\r\n          <span className=\"text-[10px]\">Search</span>\r\n        </Link>\r\n\r\n        <Link\r\n          href=\"/bookings\"\r\n          className={`flex flex-col items-center ${active(\"/bookings\") ? \"text-primary\" : \"text-gray-500\"}`}\r\n        >\r\n          <Book size={22} />\r\n          <span className=\"text-[10px]\">Bookings</span>\r\n        </Link>\r\n\r\n        <Link\r\n          href=\"/profile\"\r\n          className={`flex flex-col items-center ${active(\"/profile\") ? \"text-primary\" : \"text-gray-500\"}`}\r\n        >\r\n          <User size={22} />\r\n          <span className=\"text-[10px]\">Profile</span>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;;;;AAMe,SAAS;;IACtB,MAAM,OAAO;IAEb,MAAM,SAAS,CAAC;QACd,IAAI,SAAS,KAAK,OAAO,SAAS;QAClC,OAAO,KAAK,UAAU,CAAC;IACzB;IAEA,qBACE,yVAAC;QAAI,WAAU;kBACb,cAAA,yVAAC;YAAI,WAAU;;8BACb;oBACE,MAAK;oBACL,WAAW,CAAC,2BAA2B,EAAE,OAAO,OAAO,iBAAiB,gBAAgB,CAAC;;sCAEzF;4BAAM,MAAM;;;;;;sCACZ,yVAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;8BAGhC;oBACE,MAAK;oBACL,WAAW,CAAC,2BAA2B,EAAE,OAAO,aAAa,iBAAiB,gBAAgB,CAAC;;sCAE/F;4BAAQ,MAAM;;;;;;sCACd,yVAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;8BAGhC;oBACE,MAAK;oBACL,WAAW,CAAC,2BAA2B,EAAE,OAAO,eAAe,iBAAiB,gBAAgB,CAAC;;sCAEjG;4BAAM,MAAM;;;;;;sCACZ,yVAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;8BAGhC;oBACE,MAAK;oBACL,WAAW,CAAC,2BAA2B,EAAE,OAAO,cAAc,iBAAiB,gBAAgB,CAAC;;sCAEhG;4BAAM,MAAM;;;;;;sCACZ,yVAAC;4BAAK,WAAU;sCAAc;;;;;;;;;;;;;;;;;;;;;;;AAKxC;GA7CwB;;;;;KAAA"}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}