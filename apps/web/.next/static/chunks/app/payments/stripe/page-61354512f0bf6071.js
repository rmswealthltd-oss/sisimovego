(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{1482:function(t,e,n){Promise.resolve().then(n.bind(n,2626)),Promise.resolve().then(n.bind(n,1987))},2626:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var o=n(6543),r=n(5729),i=n(187);async function s(t){let e=await i.V.get("/payments/stripe/confirm?checkoutId=".concat(t));if(!e.ok){let t=await e.json().catch(()=>({}));throw Error((null==t?void 0:t.message)||"Stripe confirmation failed")}return e.json()}function c(t){let{checkoutId:e}=t,[n,i]=(0,r.useState)("Checking paymentâ€¦");return(0,r.useEffect)(()=>{(async function(){try{let t=await s(e);i(t.status||"Success")}catch(t){i("Payment failed")}})()},[e]),(0,o.jsx)("div",{className:"mt-4 text-gray-800",children:(0,o.jsxs)("p",{children:["Status: ",n]})})}},187:function(t,e,n){"use strict";n.d(e,{V:function(){return i}});let o="http://localhost:3001".replace(/\/$/,"")||"http://localhost:5000";async function r(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=localStorage.getItem("token"),s={"Content-Type":"application/json",...r.headers||{}};i&&(s.Authorization="Bearer ".concat(i));let c=await fetch("".concat(o).concat(e),{method:t,headers:s,body:n?JSON.stringify(n):void 0}),u=null;try{u=await c.json()}catch(t){u=null}if(!c.ok){let t=Error((null==u?void 0:u.message)||(null==u?void 0:u.error)||c.statusText);throw t.data=u,t.status=c.status,t}return u}let i={get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r("GET",t,void 0,e)},post(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r("POST",t,e,n)},put(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r("PUT",t,e,n)},patch(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r("PATCH",t,e,n)},delete(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r("DELETE",t,void 0,e)},getMe(){return this.get("/auth/me")},createBooking(t){return this.post("/bookings/create",t)},getBooking(t){return this.get("/bookings/".concat(encodeURIComponent(t)))},applyPromo(t){return this.post("/promos/apply",t)},createCheckout(t){return this.post("/payments/checkout",t)},getTrip(t){return this.get("/trips/".concat(t))},saveSubscription(t){return this.post("/push/subscribe",{subscription:t})},getSubscriptions(){return this.get("/push/subscriptions")},deleteSubscription(t){return this.delete("/push/subscriptions/".concat(encodeURIComponent(t)))}}},1987:function(t,e,n){"use strict";function o(t){let{reason:e,children:n}=t;return n}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BailoutToCSR",{enumerable:!0,get:function(){return o}}),n(3297)}},function(t){t.O(0,[585,682,744],function(){return t(t.s=1482)}),_N_E=t.O()}]);