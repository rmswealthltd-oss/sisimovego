(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{1482:function(t,e,n){Promise.resolve().then(n.bind(n,2626)),Promise.resolve().then(n.bind(n,1987))},2626:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var r=n(6543),s=n(5729),i=n(187);async function o(t){let e=await i.V.get("/payments/stripe/confirm?checkoutId=".concat(t));if(!e.ok){let t=await e.json().catch(()=>({}));throw Error((null==t?void 0:t.message)||"Stripe confirmation failed")}return e.json()}function u(t){let{checkoutId:e}=t,[n,i]=(0,s.useState)("Checking paymentâ€¦");return(0,s.useEffect)(()=>{(async function(){try{let t=await o(e);i(t.status||"Success")}catch(t){i("Payment failed")}})()},[e]),(0,r.jsx)("div",{className:"mt-4 text-gray-800",children:(0,r.jsxs)("p",{children:["Status: ",n]})})}},187:function(t,e,n){"use strict";n.d(e,{V:function(){return o}});let r="http://localhost:3001".replace(/\/$/,"")||"http://localhost:3001",s="".concat(r,"/api");async function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={"Content-Type":"application/json",...n.headers||{}};n.token&&(r.Authorization="Bearer ".concat(n.token));let i=s+e+function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new URLSearchParams;for(let n in t)void 0!==t[n]&&null!==t[n]&&e.append(n,t[n].toString());let n=e.toString();return n?"?".concat(n):""}(n.params),o=await fetch(i,{method:t,headers:r,credentials:"include",body:n.body?JSON.stringify(n.body):void 0}),u=null;try{u=await o.json()}catch(t){}if(!o.ok){let t=Error((null==u?void 0:u.message)||"Request failed");throw t.status=o.status,t.data=u,t}return u}let o={request:i,get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i("GET",t,e)},post(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i("POST",t,{...n,body:e})},put(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i("PUT",t,{...n,body:e})},patch(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i("PATCH",t,{...n,body:e})},del(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i("DELETE",t,e)},login(t,e){return this.post("/auth/login",{email:t,password:e})},logout(){return this.post("/auth/logout")},getMe(){return this.get("/auth/me")},getDriverTrips(){return this.get("/drivers/trips")},getDriverBookings(){return this.get("/drivers/bookings")},getWallet(){return this.get("/drivers/wallet/me")},getMyBookings(){return this.get("/passengers/bookings/my")},createBooking(t){return this.post("/passengers/bookings",t)},cancelBooking(t,e){return this.post("/passengers/bookings/cancel",{bookingId:t,reason:e})},getTrips(t){return this.get("/trips",{params:t})},postTrip(t){return this.post("/trips",t)},getSubscriptions(){return this.get("/push/subscription")},saveSubscription(t){return this.post("/push/subscription",{subscription:t})},deleteSubscription(t){return this.del("/push/subscription/".concat(t))},createCheckout(t){return this.post("/passengers/payments/checkout",t)},getPayment(t){return this.get("/payments/".concat(t))},getPaymentsForBooking(t){return this.get("/passengers/bookings/".concat(t,"/payments"))}}},1987:function(t,e,n){"use strict";function r(t){let{reason:e,children:n}=t;return n}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(3297)}},function(t){t.O(0,[585,682,744],function(){return t(t.s=1482)}),_N_E=t.O()}]);