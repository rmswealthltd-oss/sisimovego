(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{8125:function(e,t,n){Promise.resolve().then(n.bind(n,4149)),Promise.resolve().then(n.bind(n,1987))},4149:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(6543),s=n(5729),o=n(187),i=n(615);function a(e){var t,n;let{serverUser:a}=e,[u,l]=(0,s.useState)({name:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"",phone:null!==(n=null==a?void 0:a.phone)&&void 0!==n?n:""}),[c,h]=(0,s.useState)(!1),p=(0,i.useRouter)();async function d(){h(!0);try{await o.V.post("/auth/me/update",u),p.refresh(),alert("Saved")}catch(e){alert((null==e?void 0:e.message)||"Save failed")}finally{h(!1)}}return(0,r.jsxs)("div",{className:"bg-white p-4 rounded shadow mt-4 space-y-3",children:[(0,r.jsx)("label",{className:"text-sm",children:"Full name"}),(0,r.jsx)("input",{value:u.name,onChange:e=>l({...u,name:e.target.value}),className:"w-full border p-2 rounded"}),(0,r.jsx)("label",{className:"text-sm",children:"Phone"}),(0,r.jsx)("input",{value:u.phone,onChange:e=>l({...u,phone:e.target.value}),className:"w-full border p-2 rounded"}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)("button",{disabled:c,onClick:d,className:"px-4 py-2 bg-primary text-white rounded",children:c?"Saving...":"Save"})})]})}},187:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});let r="http://localhost:3001".replace(/\/$/,"")||"http://localhost:3001",s="".concat(r,"/api");async function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={"Content-Type":"application/json",...n.headers||{}};n.token&&(r.Authorization="Bearer ".concat(n.token));let o=s+t+function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;for(let n in e)void 0!==e[n]&&null!==e[n]&&t.append(n,e[n].toString());let n=t.toString();return n?"?".concat(n):""}(n.params),i=await fetch(o,{method:e,headers:r,credentials:"include",body:n.body?JSON.stringify(n.body):void 0}),a=null;try{a=await i.json()}catch(e){}if(!i.ok){let e=Error((null==a?void 0:a.message)||"Request failed");throw e.status=i.status,e.data=a,e}return a}let i={request:o,get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o("GET",e,t)},post(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o("POST",e,{...n,body:t})},put(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o("PUT",e,{...n,body:t})},patch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o("PATCH",e,{...n,body:t})},del(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o("DELETE",e,t)},login(e,t){return this.post("/auth/login",{email:e,password:t})},logout(){return this.post("/auth/logout")},getMe(){return this.get("/auth/me")},getDriverTrips(){return this.get("/drivers/trips")},getDriverBookings(){return this.get("/drivers/bookings")},getWallet(){return this.get("/drivers/wallet/me")},getMyBookings(){return this.get("/passengers/bookings/my")},createBooking(e){return this.post("/passengers/bookings",e)},cancelBooking(e,t){return this.post("/passengers/bookings/cancel",{bookingId:e,reason:t})},getTrips(e){return this.get("/trips",{params:e})},postTrip(e){return this.post("/trips",e)},getSubscriptions(){return this.get("/push/subscription")},saveSubscription(e){return this.post("/push/subscription",{subscription:e})},deleteSubscription(e){return this.del("/push/subscription/".concat(e))},createCheckout(e){return this.post("/passengers/payments/checkout",e)},getPayment(e){return this.get("/payments/".concat(e))},getPaymentsForBooking(e){return this.get("/passengers/bookings/".concat(e,"/payments"))}}},615:function(e,t,n){"use strict";var r=n(5411);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},1987:function(e,t,n){"use strict";function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(3297)}},function(e){e.O(0,[585,682,744],function(){return e(e.s=8125)}),_N_E=e.O()}]);