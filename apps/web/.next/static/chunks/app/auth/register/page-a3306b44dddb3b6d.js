(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{234:function(e,t,n){Promise.resolve().then(n.bind(n,36)),Promise.resolve().then(n.bind(n,1987))},36:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(6543),s=n(5729),o=n(187),u=n(615);function a(){let[e,t]=(0,s.useState)(""),[n,a]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),g=(0,u.useRouter)();async function m(t){null==t||t.preventDefault(),p(!0);try{await o.V.post("/auth/register",{name:e,email:n,phone:i,password:c}),g.push("/auth/login")}catch(e){alert((null==e?void 0:e.message)||"Registration failed")}finally{p(!1)}}return(0,r.jsxs)("form",{onSubmit:m,className:"space-y-3 bg-white p-4 rounded shadow",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm block mb-1",children:"Full name"}),(0,r.jsx)("input",{value:e,onChange:e=>t(e.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm block mb-1",children:"Phone"}),(0,r.jsx)("input",{value:i,onChange:e=>l(e.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm block mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",value:n,onChange:e=>a(e.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm block mb-1",children:"Password"}),(0,r.jsx)("input",{type:"password",value:c,onChange:e=>d(e.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{disabled:h,className:"px-4 py-2 bg-primary text-white rounded",children:h?"Creating...":"Create account"})})]})}},187:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});let r="http://localhost:3001".replace(/\/$/,"")||"http://localhost:5000";async function s(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=localStorage.getItem("token"),u={"Content-Type":"application/json",...s.headers||{}};o&&(u.Authorization="Bearer ".concat(o));let a=await fetch("".concat(r).concat(t),{method:e,headers:u,body:n?JSON.stringify(n):void 0}),i=null;try{i=await a.json()}catch(e){i=null}if(!a.ok){let e=Error((null==i?void 0:i.message)||(null==i?void 0:i.error)||a.statusText);throw e.data=i,e.status=a.status,e}return i}let o={get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s("GET",e,void 0,t)},post(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s("POST",e,t,n)},put(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s("PUT",e,t,n)},patch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s("PATCH",e,t,n)},delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s("DELETE",e,void 0,t)},getMe(){return this.get("/auth/me")},createBooking(e){return this.post("/bookings/create",e)},getBooking(e){return this.get("/bookings/".concat(encodeURIComponent(e)))},applyPromo(e){return this.post("/promos/apply",e)},createCheckout(e){return this.post("/payments/checkout",e)},getTrip(e){return this.get("/trips/".concat(e))},saveSubscription(e){return this.post("/push/subscribe",{subscription:e})},getSubscriptions(){return this.get("/push/subscriptions")},deleteSubscription(e){return this.delete("/push/subscriptions/".concat(encodeURIComponent(e)))}}},615:function(e,t,n){"use strict";var r=n(5411);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},1987:function(e,t,n){"use strict";function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(3297)}},function(e){e.O(0,[585,682,744],function(){return e(e.s=234)}),_N_E=e.O()}]);