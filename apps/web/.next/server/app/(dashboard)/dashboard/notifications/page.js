(()=>{var e={};e.id=523,e.ids=[523],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6149:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=t(117),r=t(2994),i=t(4898),n=t.n(i),o=t(6083),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let c=["",{children:["(dashboard)",{children:["dashboard",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8423)),"C:\\Users\\HP\\sisimovego\\apps\\web\\src\\app\\(dashboard)\\dashboard\\notifications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2697)),"C:\\Users\\HP\\sisimovego\\apps\\web\\src\\app\\(dashboard)\\dashboard\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,8658,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1255)),"C:\\Users\\HP\\sisimovego\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8658,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\HP\\sisimovego\\apps\\web\\src\\app\\(dashboard)\\dashboard\\notifications\\page.tsx"],x="/(dashboard)/dashboard/notifications/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/dashboard/notifications/page",pathname:"/dashboard/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1955:(e,s,t)=>{Promise.resolve().then(t.bind(t,2020))},2294:(e,s,t)=>{Promise.resolve().then(t.bind(t,4160))},2020:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(2281),r=t(2493),i=t(9339),n=t(7677),o=t(1932),l=t(8603),c=t(1893);let d=(0,r.createContext)({role:null,setRole:()=>{}});function x({children:e}){let{user:s}=(0,c.a)(),[t,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!s){i(null);return}"admin@sisimove.com"===s.email?i("admin"):i("passenger")},[s]),a.jsx(d.Provider,{value:{role:t,setRole:i},children:e})}function h(){return(0,r.useContext)(d)}function u({open:e,onClose:s}){let t=(0,o.usePathname)(),{user:r,logout:d}=(0,c.a)(),{role:x}=h(),u=[{name:"Dashboard",href:"/dashboard",icon:l.m6D},{name:"Search Trips",href:"/dashboard/search",icon:l.i63},{name:"Post a Trip",href:"/dashboard/post-trip",icon:l.xVi,roles:["driver","admin"]},{name:"My Trips",href:"/dashboard/my-trips",icon:l.i63,roles:["passenger","driver"]},{name:"Profile",href:"/dashboard/profile",icon:l.fzv},{name:"Notifications",href:"/dashboard/notifications",icon:l.vWP},{name:"Settings",href:"/dashboard/settings",icon:l.nbt,roles:["admin"]}];return(0,a.jsxs)(a.Fragment,{children:[e&&a.jsx("div",{onClick:s,className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden"}),(0,a.jsxs)("aside",{className:(0,i.Z)("fixed z-50 inset-y-0 left-0 w-64 bg-white shadow-xl border-r border-gray-200 flex flex-col transition-transform duration-300",e?"translate-x-0":"-translate-x-full md:translate-x-0"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-200",children:[a.jsx("h1",{className:"text-xl font-semibold text-orange-500",children:"SisiMove"}),a.jsx("button",{onClick:s,className:"md:hidden text-gray-600 hover:text-orange-500",children:a.jsx(l.q5L,{size:22})})]}),(0,a.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200",children:[a.jsx("p",{className:"text-lg font-medium text-gray-900",children:r?.lastName||"Guest User"}),a.jsx("p",{className:"text-sm text-gray-500",children:r?.email||"Not logged in"}),x&&a.jsx("span",{className:"mt-1 inline-block text-xs px-2 py-1 rounded-md bg-gray-100 text-gray-600 capitalize",children:x})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:u.filter(e=>!e.roles||e.roles.includes(x||"")).map(e=>{let r=t===e.href,o=e.icon;return(0,a.jsxs)(n.default,{href:e.href,className:(0,i.Z)("flex items-center gap-3 px-6 py-3 text-sm font-medium transition rounded-md",r?"bg-orange-500 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),onClick:s,children:[a.jsx(o,{size:18}),e.name]},e.href)})}),r&&a.jsx("div",{className:"p-6 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:d,className:"flex items-center gap-3 text-red-600 font-medium hover:text-red-800 transition",children:[a.jsx(l.xqh,{size:18}),"Logout"]})})]})]})}function m({onOpenSidebar:e}){let{user:s,logout:t,loading:r}=(0,c.a)(),{role:i}=h();return r?a.jsx("header",{className:"w-full h-16 bg-white border-b shadow-sm"}):a.jsx("header",{className:"w-full bg-white border-b shadow-sm h-16 flex items-center sticky top-0 z-40",children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full px-4 md:px-6",children:[a.jsx("button",{onClick:e,className:"md:hidden p-2 rounded-md border bg-gray-100 hover:bg-gray-200",children:a.jsx(l.cur,{size:22})}),a.jsx("h1",{className:"font-semibold text-lg text-gray-800",children:"Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[i&&a.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-gray-100 text-gray-600 capitalize",children:i}),s&&a.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.lastName}),s&&a.jsx("button",{onClick:t,className:"text-sm px-3 py-1 rounded-md bg-red-500 text-white hover:bg-red-600 transition",children:"Logout"})]})]})})}let p=(0,r.createContext)({notification:null,show:()=>{},clear:()=>{}});function f({children:e}){let[s,t]=(0,r.useState)(null);return a.jsx(p.Provider,{value:{notification:s,show:function(e,s){t({type:e,message:s}),setTimeout(()=>t(null),5e3)},clear:function(){t(null)}},children:e})}function b({children:e}){let[s,t]=(0,r.useState)(!1);return a.jsx(c.H,{children:a.jsx(x,{children:a.jsx(f,{children:(0,a.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[a.jsx(u,{open:s,onClose:()=>t(!1)}),(0,a.jsxs)("div",{className:(0,i.Z)("flex flex-col flex-1 transition-all duration-200",s?"md:ml-64":"md:ml-0"),children:[a.jsx(m,{onOpenSidebar:()=>t(!0)}),a.jsx("main",{className:"p-6 w-full max-w-7xl mx-auto",children:e})]})]})})})})}},4160:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(2281),r=t(2493);function i(){let[e,s]=(0,r.useState)(!0),[t,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(!0),l=async()=>{await fetch("/api/notifications/settings",{method:"POST",body:JSON.stringify({email:e,sms:t,inApp:n})}),alert("Settings updated.")};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Email Notifications"}),a.jsx("input",{type:"checkbox",checked:e,onChange:e=>s(e.target.checked),className:"toggle-checkbox"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"SMS Notifications"}),a.jsx("input",{type:"checkbox",checked:t,onChange:e=>i(e.target.checked),className:"toggle-checkbox"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"In-App Notifications"}),a.jsx("input",{type:"checkbox",checked:n,onChange:e=>o(e.target.checked),className:"toggle-checkbox"})]}),a.jsx("button",{onClick:l,className:"bg-primary text-white px-5 py-2 rounded-xl",children:"Save Preferences"})]})}function n(){let[e,s]=(0,r.useState)([]),t=async()=>{let e=await fetch("/api/notifications/list");s(await e.json())};return((0,r.useEffect)(()=>{t()},[]),0===e.length)?a.jsx("p",{className:"text-gray-500",children:"No notifications yet."}):a.jsx("ul",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("li",{className:"border rounded-xl p-4 bg-white",children:[a.jsx("p",{className:"font-semibold text-gray-800",children:e.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.body}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.createdAt).toLocaleString()})]},e.id))})}function o(){let[e,s]=(0,r.useState)(!1),[t,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async function(){let e=await fetch("/api/push/status");s((await e.json()).enabled),i(!1)})()},[]);let n=async()=>{i(!0);let e=await navigator.serviceWorker?.ready,t=await fetch("/api/push/public-key"),{publicKey:a}=await t.json(),r=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Uint8Array.from(atob(a),e=>e.charCodeAt(0))});await fetch("/api/push/subscribe",{method:"POST",body:JSON.stringify(r)}),s(!0),i(!1)},o=async()=>{i(!0);let e=await navigator.serviceWorker?.ready,t=await e.pushManager.getSubscription();t&&(await t.unsubscribe(),await fetch("/api/push/unsubscribe",{method:"POST"})),s(!1),i(!1)};return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-700",children:"Enable push notifications for urgent trip updates."}),a.jsx("button",{onClick:e?o:n,disabled:t,className:`px-5 py-2 rounded-xl text-white ${e?"bg-secondary":"bg-primary"} disabled:opacity-50`,children:t?"Processing...":e?"Disable Push Notifications":"Enable Push Notifications"})]})}function l(){return(0,a.jsxs)("div",{className:"max-w-3xl space-y-12",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Notifications"}),(0,a.jsxs)("section",{className:"card space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Notification Preferences"}),a.jsx(i,{})]}),(0,a.jsxs)("section",{className:"card space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Web Push"}),a.jsx(o,{})]}),(0,a.jsxs)("section",{className:"card space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Recent In-App Messages"}),a.jsx(n,{})]})]})}},2697:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,t(3610).createProxy)(String.raw`C:\Users\HP\sisimovego\apps\web\src\app\(dashboard)\dashboard\layout.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default},8423:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,t(3610).createProxy)(String.raw`C:\Users\HP\sisimovego\apps\web\src\app\(dashboard)\dashboard\notifications\page.tsx`),{__esModule:r,$$typeof:i}=a,n=a.default},9339:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=function(){for(var e,s,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(s=function e(s){var t,a,r="";if("string"==typeof s||"number"==typeof s)r+=s;else if("object"==typeof s){if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(a=e(s[t]))&&(r&&(r+=" "),r+=a)}else for(a in s)s[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=s);return a}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[49,108],()=>t(6149));module.exports=a})();