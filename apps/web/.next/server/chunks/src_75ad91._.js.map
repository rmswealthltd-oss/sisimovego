{
  "version": 3,
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/components/HeroSearch.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function HeroSearch() {\r\n  const router = useRouter();\r\n\r\n  // Native, stable date (no date-fns)\r\n  const today = new Date().toISOString().split(\"T\")[0];\r\n\r\n  const [origin, setOrigin] = useState(\"\");\r\n  const [destination, setDestination] = useState(\"\");\r\n  const [date, setDate] = useState(today);\r\n\r\n  function submit(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n\r\n    if (!origin.trim() || !destination.trim()) return;\r\n\r\n    const q = new URLSearchParams();\r\n    q.set(\"origin\", origin.trim());\r\n    q.set(\"destination\", destination.trim());\r\n    q.set(\"date\", date);\r\n\r\n    router.push(`/results?${q.toString()}`);\r\n  }\r\n\r\n  return (\r\n    <section className=\"bg-white border rounded-xl p-6 shadow-sm space-y-4\">\r\n      <div>\r\n        <h2 className=\"text-xl font-semibold\">Find your next trip</h2>\r\n        <p className=\"text-sm text-gray-600\">\r\n          Enter your route and travel date to get started.\r\n        </p>\r\n      </div>\r\n\r\n      <form\r\n        onSubmit={submit}\r\n        className=\"grid grid-cols-1 md:grid-cols-4 gap-3\"\r\n      >\r\n        <input\r\n          value={origin}\r\n          onChange={(e) => setOrigin(e.target.value)}\r\n          placeholder=\"Origin (city, landmark)\"\r\n          className=\"border p-3 rounded-lg text-sm w-full\"\r\n        />\r\n\r\n        <input\r\n          value={destination}\r\n          onChange={(e) => setDestination(e.target.value)}\r\n          placeholder=\"Destination\"\r\n          className=\"border p-3 rounded-lg text-sm w-full\"\r\n        />\r\n\r\n        <input\r\n          type=\"date\"\r\n          value={date}\r\n          min={today}\r\n          onChange={(e) => setDate(e.target.value)}\r\n          className=\"border p-3 rounded-lg text-sm w-full\"\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-primary text-white px-4 py-3 rounded-lg w-full font-medium\"\r\n        >\r\n          Search trips\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;;;;AAKe,SAAS;IACtB,MAAM,SAAS;IAEf,oCAAoC;IACpC,MAAM,QAAQ,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAEpD,MAAM,CAAC,QAAQ,UAAU,GAAG,6XAAS;IACrC,MAAM,CAAC,aAAa,eAAe,GAAG,6XAAS;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,6XAAS;IAEjC,SAAS,OAAO,CAAmB;QACjC,GAAG;QAEH,IAAI,CAAC,OAAO,IAAI,MAAM,CAAC,YAAY,IAAI,IAAI;QAE3C,MAAM,IAAI,IAAI;QACd,EAAE,GAAG,CAAC,UAAU,OAAO,IAAI;QAC3B,EAAE,GAAG,CAAC,eAAe,YAAY,IAAI;QACrC,EAAE,GAAG,CAAC,QAAQ;QAEd,OAAO,IAAI,CAAC,CAAC,SAAS,EAAE,EAAE,QAAQ,GAAG,CAAC;IACxC;IAEA,qBACE,oZAAC;QAAQ,WAAU;;0BACjB,oZAAC;;kCACC,oZAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,oZAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAKvC,oZAAC;gBACC,UAAU;gBACV,WAAU;;kCAEV,oZAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wBACzC,aAAY;wBACZ,WAAU;;;;;;kCAGZ,oZAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,aAAY;wBACZ,WAAU;;;;;;kCAGZ,oZAAC;wBACC,MAAK;wBACL,OAAO;wBACP,KAAK;wBACL,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,WAAU;;;;;;kCAGZ,oZAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/lib/money.ts"],"sourcesContent":["/**\r\n * money.ts\r\n * ----------\r\n * Lightweight currency formatter for the SisimoveGo frontend.\r\n * Supports:\r\n *   - KES (default)\r\n *   - USD\r\n *   - NGN\r\n *   - ZAR\r\n *   - UGX\r\n *   - TZS\r\n *\r\n * Automatically handles:\r\n *   - rounding\r\n *   - localization\r\n *   - fallback for server-side rendering\r\n */\r\n\r\nexport type CurrencyCode =\r\n  | \"KES\"\r\n  | \"USD\"\r\n  | \"NGN\"\r\n  | \"ZAR\"\r\n  | \"UGX\"\r\n  | \"TZS\";\r\n\r\nconst DEFAULT_CURRENCY: CurrencyCode = \"KES\";\r\n\r\n/**\r\n * Format a price into readable currency\r\n */\r\nexport function money(\r\n  amount: number | string | null | undefined,\r\n  currency: CurrencyCode = DEFAULT_CURRENCY\r\n): string {\r\n  if (amount === null || amount === undefined) return \"—\";\r\n\r\n  const value = typeof amount === \"string\" ? parseFloat(amount) : amount;\r\n\r\n  if (isNaN(value)) return \"—\";\r\n\r\n  try {\r\n    return new Intl.NumberFormat(\"en-KE\", {\r\n      style: \"currency\",\r\n      currency,\r\n      minimumFractionDigits: 0\r\n    }).format(value);\r\n  } catch (err) {\r\n    // Fallback for unsupported currencies or SSR\r\n    return `${currency} ${value.toFixed(0)}`;\r\n  }\r\n}\r\n\r\n/**\r\n * Convert raw M-PESA / API integers into money\r\n */\r\nexport function moneyFromCents(\r\n  cents: number,\r\n  currency: CurrencyCode = DEFAULT_CURRENCY\r\n): string {\r\n  return money(cents / 100, currency);\r\n}\r\n\r\n/**\r\n * Strip formatting → number (useful before sending to API)\r\n */\r\nexport function parseMoney(str: string): number {\r\n  if (!str) return 0;\r\n\r\n  // Remove commas, spaces, currency symbols\r\n  const cleaned = str.replace(/[^\\d.-]/g, \"\");\r\n\r\n  return parseFloat(cleaned) || 0;\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;CAgBC;;;;;AAUD,MAAM,mBAAiC;AAKhC,SAAS,MACd,MAA0C,EAC1C,WAAyB,gBAAgB;IAEzC,IAAI,WAAW,QAAQ,WAAW,WAAW,OAAO;IAEpD,MAAM,QAAQ,OAAO,WAAW,WAAW,WAAW,UAAU;IAEhE,IAAI,MAAM,QAAQ,OAAO;IAEzB,IAAI;QACF,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YACpC,OAAO;YACP;YACA,uBAAuB;QACzB,GAAG,MAAM,CAAC;IACZ,EAAE,OAAO,KAAK;QACZ,6CAA6C;QAC7C,OAAO,CAAC,EAAE,SAAS,CAAC,EAAE,MAAM,OAAO,CAAC,GAAG,CAAC;IAC1C;AACF;AAKO,SAAS,eACd,KAAa,EACb,WAAyB,gBAAgB;IAEzC,OAAO,MAAM,QAAQ,KAAK;AAC5B;AAKO,SAAS,WAAW,GAAW;IACpC,IAAI,CAAC,KAAK,OAAO;IAEjB,0CAA0C;IAC1C,MAAM,UAAU,IAAI,OAAO,CAAC,YAAY;IAExC,OAAO,WAAW,YAAY;AAChC"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/constants/tripStatus.ts"],"sourcesContent":["// apps/web/src/constants/tripStatus.ts\r\n\r\nexport const TripStatus = {\r\n  PENDING: \"PENDING\",\r\n  ASSIGNED: \"ASSIGNED\",\r\n  STARTED: \"STARTED\",\r\n  ARRIVED: \"ARRIVED\",\r\n  COMPLETED: \"COMPLETED\",\r\n  CANCELLED: \"CANCELLED\",\r\n} as const;\r\n\r\nexport type TripStatusType = (typeof TripStatus)[keyof typeof TripStatus];\r\n\r\nexport const TripStatusLabels: Record<TripStatusType, string> = {\r\n  PENDING: \"Pending\",\r\n  ASSIGNED: \"Driver Assigned\",\r\n  STARTED: \"On the way\",\r\n  ARRIVED: \"Arrived\",\r\n  COMPLETED: \"Completed\",\r\n  CANCELLED: \"Cancelled\",\r\n};\r\n\r\nexport const TripStatusColors: Record<TripStatusType, string> = {\r\n  PENDING: \"gray\",\r\n  ASSIGNED: \"blue\",\r\n  STARTED: \"green\",\r\n  ARRIVED: \"orange\",\r\n  COMPLETED: \"primary\",\r\n  CANCELLED: \"red\",\r\n};\r\n"],"names":[],"mappings":"AAAA,uCAAuC;;;;;;AAEhC,MAAM,aAAa;IACxB,SAAS;IACT,UAAU;IACV,SAAS;IACT,SAAS;IACT,WAAW;IACX,WAAW;AACb;AAIO,MAAM,mBAAmD;IAC9D,SAAS;IACT,UAAU;IACV,SAAS;IACT,SAAS;IACT,WAAW;IACX,WAAW;AACb;AAEO,MAAM,mBAAmD;IAC9D,SAAS;IACT,UAAU;IACV,SAAS;IACT,SAAS;IACT,WAAW;IACX,WAAW;AACb"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/utils/trip.ts"],"sourcesContent":["// apps/web/src/utils/trip.ts\r\n\r\nimport { format } from \"date-fns\";\r\nimport { TripView } from \"@/types/trip\";\r\nimport { TripStatusLabels, TripStatusColors } from \"@/constants/tripStatus\";\r\nimport { moneyFromCents } from \"@/lib/money\";\r\n\r\n/**\r\n * ===============\r\n * SAFE DATE UTILS\r\n * ===============\r\n */\r\n\r\nexport function safeDate(input: any): Date | null {\r\n  if (!input) return null;\r\n\r\n  try {\r\n    const d = new Date(input);\r\n    if (isNaN(d.getTime())) return null;\r\n    return d;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function formatDate(input: any, pattern: string, fallback = \"—\") {\r\n  const d = safeDate(input);\r\n  if (!d) return fallback;\r\n\r\n  try {\r\n    return format(d, pattern);\r\n  } catch {\r\n    return fallback;\r\n  }\r\n}\r\n\r\n/**\r\n * ===============\r\n * TIME HELPERS\r\n * ===============\r\n */\r\n\r\nexport function tripShortTime(input?: string | Date | null): string {\r\n  return formatDate(input, \"HH:mm\", \"—\");\r\n}\r\n\r\nexport function tripTime(input?: string | Date | null): string {\r\n  return formatDate(input, \"dd MMM yyyy, HH:mm\", \"—\");\r\n}\r\n\r\n/**\r\n * ===============\r\n * ROUTE + FARE\r\n * ===============\r\n */\r\n\r\nexport function tripRouteLabel(origin?: string, destination?: string) {\r\n  const o = origin?.trim() || \"Unknown\";\r\n  const d = destination?.trim() || \"Unknown\";\r\n  return `${o} → ${d}`;\r\n}\r\n\r\nexport function tripFare(cents: number) {\r\n  return moneyFromCents(cents);\r\n}\r\n\r\n/**\r\n * ===============\r\n * STATUS HELPERS\r\n * ===============\r\n */\r\n\r\nexport function tripStatusLabel(status: string) {\r\n  return TripStatusLabels[status as keyof typeof TripStatusLabels] || \"Unknown\";\r\n}\r\n\r\nexport function tripStatusColor(status: string) {\r\n  return TripStatusColors[status as keyof typeof TripStatusColors] || \"gray\";\r\n}\r\n\r\nexport function isTripCompleted(status: string) {\r\n  return status === \"COMPLETED\";\r\n}\r\n\r\nexport function isTripActive(status: string) {\r\n  return status === \"DRIVER_ASSIGNED\" || status === \"ONGOING\";\r\n}\r\n\r\n/**\r\n * ===============\r\n * SEATS\r\n * ===============\r\n */\r\n\r\nexport function seatsAvailable(total: number, booked: number) {\r\n  return Math.max(0, total - booked);\r\n}\r\n\r\nexport function isSeatAvailable(total: number, booked: number) {\r\n  return seatsAvailable(total, booked) > 0;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;;;;;;;;;;;;;;AAatB,SAAS,SAAS,KAAU;IACjC,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI;QACF,MAAM,IAAI,IAAI,KAAK;QACnB,IAAI,MAAM,EAAE,OAAO,KAAK,OAAO;QAC/B,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,WAAW,KAAU,EAAE,OAAe,EAAE,WAAW,GAAG;IACpE,MAAM,IAAI,SAAS;IACnB,IAAI,CAAC,GAAG,OAAO;IAEf,IAAI;QACF,OAAO,yNAAO,GAAG;IACnB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAQO,SAAS,cAAc,KAA4B;IACxD,OAAO,WAAW,OAAO,SAAS;AACpC;AAEO,SAAS,SAAS,KAA4B;IACnD,OAAO,WAAW,OAAO,sBAAsB;AACjD;AAQO,SAAS,eAAe,MAAe,EAAE,WAAoB;IAClE,MAAM,IAAI,QAAQ,UAAU;IAC5B,MAAM,IAAI,aAAa,UAAU;IACjC,OAAO,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC;AACtB;AAEO,SAAS,SAAS,KAAa;IACpC,OAAO,qJAAe;AACxB;AAQO,SAAS,gBAAgB,MAAc;IAC5C,OAAO,iKAAgB,CAAC,OAAwC,IAAI;AACtE;AAEO,SAAS,gBAAgB,MAAc;IAC5C,OAAO,iKAAgB,CAAC,OAAwC,IAAI;AACtE;AAEO,SAAS,gBAAgB,MAAc;IAC5C,OAAO,WAAW;AACpB;AAEO,SAAS,aAAa,MAAc;IACzC,OAAO,WAAW,qBAAqB,WAAW;AACpD;AAQO,SAAS,eAAe,KAAa,EAAE,MAAc;IAC1D,OAAO,KAAK,GAAG,CAAC,GAAG,QAAQ;AAC7B;AAEO,SAAS,gBAAgB,KAAa,EAAE,MAAc;IAC3D,OAAO,eAAe,OAAO,UAAU;AACzC"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/apps/web/src/components/TripCard.tsx"],"sourcesContent":["// apps/web/components/TripCard.tsx\r\n\"use client\";\r\n\r\nimport React from \"react\";\r\nimport Link from \"next/link\";\r\nimport { TripView } from \"../../types/trip\";\r\nimport { moneyFromCents } from \"@/lib/money\";\r\nimport { ClockIcon, UserIcon } from \"@heroicons/react/24/solid\";\r\nimport * as TripUtils from \"@/utils/trip\";\r\n\r\nexport default function TripCard({ trip }: { trip: TripView }) {\r\n  // Dev-only debug to validate date data\r\n  if (process.env.NODE_ENV !== \"production\") {\r\n    // eslint-disable-next-line no-console\r\n    console.log(\"TripCard date check:\", {\r\n      id: trip.id,\r\n      departureAt: trip.departureAt,\r\n      arrivalAt: trip.arrivalAt,\r\n      parsedDeparture: TripUtils.tripShortTime(trip.departureAt),\r\n      parsedArrival: TripUtils.tripShortTime(trip.arrivalAt),\r\n    });\r\n  }\r\n\r\n  const departure = TripUtils.tripShortTime(trip.departureAt);\r\n  const arrival =\r\n    trip.arrivalAt ? TripUtils.tripShortTime(trip.arrivalAt) : null;\r\n\r\n  return (\r\n    <Link\r\n      href={`/trip/${trip.id}`}\r\n      className=\"block bg-white dark:bg-gray-900 rounded-xl shadow p-4 border dark:border-gray-700 hover:shadow-lg transition\"\r\n    >\r\n      {/* TITLE */}\r\n      <div className=\"text-xl font-semibold mb-1\">\r\n        {TripUtils.tripRouteLabel(trip.origin, trip.destination)}\r\n      </div>\r\n\r\n      {/* TIME */}\r\n      <div className=\"flex items-center text-gray-600 dark:text-gray-300 gap-2\">\r\n        <ClockIcon className=\"w-4 h-4\" />\r\n        <span>\r\n          {departure}\r\n          {arrival && <> → {arrival}</>}\r\n        </span>\r\n      </div>\r\n\r\n      {/* DRIVER */}\r\n      <div className=\"flex items-center text-gray-600 dark:text-gray-300 gap-2 mt-1\">\r\n        <UserIcon className=\"w-4 h-4\" />\r\n        <span>{trip.driverName || \"Driver\"}</span>\r\n      </div>\r\n\r\n      {/* PRICE */}\r\n      <div className=\"mt-4 text-lg font-bold text-blue-600 dark:text-blue-400\">\r\n        {moneyFromCents(trip.priceCents)}\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;;;;;;AACnC;;;;;;AASe,SAAS,SAAS,EAAE,IAAI,EAAsB;IAC3D,uCAAuC;IACvC,wCAA2C;QACzC,sCAAsC;QACtC,QAAQ,GAAG,CAAC,wBAAwB;YAClC,IAAI,KAAK,EAAE;YACX,aAAa,KAAK,WAAW;YAC7B,WAAW,KAAK,SAAS;YACzB,iBAAiB,oIAAU,aAAa,CAAC,KAAK,WAAW;YACzD,eAAe,oIAAU,aAAa,CAAC,KAAK,SAAS;QACvD;IACF;IAEA,MAAM,YAAY,oIAAU,aAAa,CAAC,KAAK,WAAW;IAC1D,MAAM,UACJ,KAAK,SAAS,GAAG,oIAAU,aAAa,CAAC,KAAK,SAAS,IAAI;IAE7D,qBACE;QACE,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;QACxB,WAAU;;0BAGV,oZAAC;gBAAI,WAAU;0BACZ,oIAAU,cAAc,CAAC,KAAK,MAAM,EAAE,KAAK,WAAW;;;;;;0BAIzD,oZAAC;gBAAI,WAAU;;kCACb;wBAAW,WAAU;;;;;;kCACrB,oZAAC;;4BACE;4BACA,yBAAW;;oCAAE;oCAAI;;;;;;;;;;;;;;;0BAKtB,oZAAC;gBAAI,WAAU;;kCACb;wBAAU,WAAU;;;;;;kCACpB,oZAAC;kCAAM,KAAK,UAAU,IAAI;;;;;;;;;;;;0BAI5B,oZAAC;gBAAI,WAAU;0BACZ,qJAAe,KAAK,UAAU;;;;;;;;;;;;AAIvC"}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}